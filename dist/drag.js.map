{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 9a2e6b9b68dd5ec85ba6","webpack:///./src/drag.js","webpack:///./src/domApi.js"],"names":["copyElm","elm","el","cloneNode","style","position","getBoundingClientRect","margin","top","left","zIndex","exchange","arr","idx","idx2","temp","findIndex","target","i","length","getOVerlayElm","source","threshold","p1","p2","overlayWidth","Math","min","bottom","max","overlayHeight","right","overlay","minarea","width","height","applyDrag","container","elms","undefined","l","children","j","jlength","getAttribute","push","k","klength","sourceElm","point","transform","moveX","startX","moveY","startY","a","b","targetIdx","parentNode","insertBefore","nextSibling","updateViews","_updateView","document","e","clientX","clientY","dragId","setTimeout","body","appendChild","removeChild","createElement","innerHTML","getElementsByTagName","module","exports","index","setAttribute","update","trim","string","replace","hasClass","cls","indexOf","Error","classList","contains","className","addClass","curClass","classes","split","clsName","add","removeClass","remove","addVendor","property","value","bindEvent","addEventListener","element","event","handler","attachEvent","on"],"mappings":"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","file":"drag.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"drag\"] = factory();\n\telse\n\t\troot[\"drag\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 9a2e6b9b68dd5ec85ba6\n **/","import { on, addClass, removeClass } from './domApi'\n\nfunction copyElm (elm) {\n  var el = elm.cloneNode(true)\n  el.style.position = 'fixed'\n  var position = elm.getBoundingClientRect()\n  el.style.margin = '0px'\n  el.style.top = position.top + 'px'\n  el.style.left = position.left + 'px'\n  el.style.zIndex = 9999\n  return el\n}\n\nfunction exchange (arr, idx, idx2) {\n  var temp = arr[idx]\n  arr[idx] = arr[idx2]\n  arr[idx2] = temp\n}\n\nfunction findIndex (arr, target) {\n  var i = arr.length\n  while (i--) {\n    if (arr[i] === target) {\n      return i\n    }\n  }\n  return -1\n}\n// 成功则返回target\nfunction getOVerlayElm (source, target, threshold) {\n  var p1 = source.getBoundingClientRect()\n  var p2 = target.getBoundingClientRect()\n  var overlayWidth = (Math.min(p1.bottom, p2.bottom) - Math.max(p1.top, p2.top))\n  var overlayHeight = (Math.min(p1.right, p2.right) - Math.max(p1.left, p2.left))\n  if (overlayWidth > 0 && overlayHeight > 0) {\n    var overlay = overlayWidth * overlayHeight\n    var minarea = Math.min(p1.width * p1.height, p2.width * p2.height)\n    if (overlay / minarea > threshold) {\n      // 表示target元素被souce覆盖了！\n      return target\n    }\n  }\n  return null\n}\n\n/* **********core*********** */\nfunction applyDrag (container) {\n  var elms = []\n  if (container.length !== undefined) {\n    for (var i = 0, l = container.length; i < l; i++) {\n      var children = container[i].children\n      for (var j = 0, jlength = children.length; j < jlength; j++) {\n        if (children[j].getAttribute('drag') !== null) {\n          elms.push(children[j])\n        }\n      }\n    }\n  } else {\n    children = container.children\n    for (var k = 0, klength = children.length; k < klength; k++) {\n      if (children[k].getAttribute('drag') !== null) {\n        elms.push(children[j])\n      }\n    }\n  }\n  var length = elms.length\n  return function (elm, sourceElm, point) {\n    elm.style.transform = `translate3d(${point.moveX - point.startX}px, ${point.moveY - point.startY}px, 0) rotate(5deg)`\n    var a = elm.getBoundingClientRect()\n    var el\n    var i = length\n    var b\n    var targetIdx = findIndex(elms, sourceElm)\n    while (i--) {\n      el = elms[i]\n      if (el === sourceElm) {\n        continue\n      }\n        // 覆盖面积达到百分之七十的元素\n        // 1.如果该元素于sourceElm属于一个父容器，则\n        // 1.1 如果sourceElm粗线在el之前，则 insertBefore(sourceElm, el.nextSibling)\n        // 1.2 如果sourceElm粗线在el之后，则 insertBefore(sourceElm, el)\n        // 2. 如果el与sourceElm不属于同一个父容器\n        // 2.1 如果a.top > b.top 则 insertBefore(sourceElm, el.nextSibling)\n        // 2.2 如果 a.bottom < b.bottom 则 insertBefore(sourceElm, el)\n      if (el.parentNode === sourceElm.parentNode) {\n        if (getOVerlayElm(elm, el, 0.7)) {\n          if (targetIdx < i) {\n            el.parentNode.insertBefore(sourceElm, el.nextSibling)\n            exchange(elms, targetIdx, i)\n          } else if (targetIdx > i) {\n            el.parentNode.insertBefore(sourceElm, el)\n            exchange(elms, targetIdx, i)\n          }\n          break\n        }\n      } else {\n        if (getOVerlayElm(elm, el, 0.3)) {\n          b = el.getBoundingClientRect()\n          if (a.top > b.top) {\n            el.parentNode.insertBefore(sourceElm, el.nextSibling)\n            exchange(elms, targetIdx, i)\n          } else if (a.bottom < b.bottom) {\n            el.parentNode.insertBefore(sourceElm, el)\n            exchange(elms, targetIdx, i)\n          }\n          break\n        }\n      }\n    }\n  }\n}\n\n// 给每个容器打标签\nvar idx = 0\n// 存放各个容器下的updateView方法\nvar updateViews = {}\nvar _updateView = null\n// 拖动的元素，拖动的时候其实它是source创建出来的副本\nvar target = null\n// 选中的拖动元素\nvar source = null\nvar point = {\n  startX: 0,\n  startY: 0,\n  moveX: 0,\n  moveY: 0\n}\n// 监听全局鼠标按下事件\n// 如果该元素包含drag属性，则启用drag方法\non(document, 'mousedown', function (e) {\n  if (e.target.getAttribute('drag') !== null) {\n    point.startX = e.clientX\n    point.startY = e.clientY\n    var dragId = e.target.parentNode.getAttribute('drag-id')\n    if (dragId === undefined) return\n    _updateView = updateViews[dragId]\n    setTimeout(function () {\n      source = e.target\n      target = copyElm(source)\n      addClass(source, 'drag-mask')\n      document.body.appendChild(target)\n    })\n  }\n})\n\non(document, 'mousemove', function (e) {\n  if (target !== null) {\n    point.moveX = e.clientX\n    point.moveY = e.clientY\n    _updateView(target, source, point)\n  }\n})\n\non(document, 'mouseup', function () {\n  if (target) {\n    document.body.removeChild(target)\n    removeClass(source, 'drag-mask')\n    target = null\n  }\n})\n\n// 生成drag-mask样式\nvar style = document.createElement('style')\nstyle.innerHTML = `.drag-mask::after {\n  content: \"\";\n  position: absolute;\n  top:0;\n  left:0;\n  width: 100%;\n  height: 100%;\n  background-color: #c0c6ca;\n  user-select: none;\n  -webkit-user-select:none;\n  -moz-user-select: none;\n  z-index: 9999;\n  border-radius: 4px;\n}\n[drag] {\n  position: relative;\n  cursor: pointer;\n}`\n\ndocument.getElementsByTagName('head')[0].appendChild(style)\n\nmodule.exports = function (elms) {\n  var index = idx++\n  if (elms.length === undefined) {\n    elms.setAttribute('drag-id', index)\n  } else {\n    for (var i = 0, l = elms.length; i < l; i++) {\n      elms[i].setAttribute('drag-id', index)\n    }\n  }\n  updateViews[index] = applyDrag(elms)\n  return {\n    update: function () {\n      updateViews[index] = applyDrag(elms)\n    }\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/drag.js\n **/","var trim = function (string) {\n  return (string || '').replace(/^[\\s\\uFEFF]+|[\\s\\uFEFF]+$/g, '')\n}\n\nvar hasClass = function (el, cls) {\n  if (!el || !cls) return false\n  if (cls.indexOf(' ') !== -1) throw new Error('className should not contain space.')\n  if (el.classList) {\n    return el.classList.contains(cls)\n  } else {\n    return (' ' + el.className + ' ').indexOf(' ' + cls + ' ') > -1\n  }\n}\n\nvar addClass = function (el, cls) {\n  if (!el) return\n  var curClass = el.className\n  var classes = (cls || '').split(' ')\n\n  for (var i = 0, j = classes.length; i < j; i++) {\n    var clsName = classes[ i ]\n    if (!clsName) continue\n\n    if (el.classList) {\n      el.classList.add(clsName)\n    } else {\n      if (!hasClass(el, clsName)) {\n        curClass += ' ' + clsName\n      }\n    }\n  }\n  if (!el.classList) {\n    el.className = curClass\n  }\n}\n\nvar removeClass = function (el, cls) {\n  if (!el || !cls) return\n  var classes = cls.split(' ')\n  var curClass = ' ' + el.className + ' '\n\n  for (var i = 0, j = classes.length; i < j; i++) {\n    var clsName = classes[ i ]\n    if (!clsName) continue\n\n    if (el.classList) {\n      el.classList.remove(clsName)\n    } else {\n      if (hasClass(el, clsName)) {\n        curClass = curClass.replace(' ' + clsName + ' ', ' ')\n      }\n    }\n  }\n  if (!el.classList) {\n    el.className = trim(curClass)\n  }\n}\n\nvar addVendor = function (property, value) {\n  return property + ':' + value\n}\n\nvar bindEvent = (function () {\n  if (document.addEventListener) {\n    return function (element, event, handler) {\n      if (element && event && handler) {\n        element.addEventListener(event, handler, false)\n      }\n    }\n  } else {\n    return function (element, event, handler) {\n      if (element && event && handler) {\n        element.attachEvent('on' + event, handler)\n      }\n    }\n  }\n})()\n\nmodule.exports = {\n  hasClass: hasClass,\n  addClass: addClass,\n  removeClass: removeClass,\n  addVendor,\n  on: bindEvent\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/domApi.js\n **/"],"sourceRoot":""}