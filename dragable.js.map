{"version":3,"sources":["webpack:///dragable.js","webpack:///webpack/bootstrap e260aac204b5a9792963","webpack:///./src/main.js","webpack:///./src/dragable.js","webpack:///./src/domApi.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","_interopRequireDefault","obj","__esModule","default","$","sel","document","querySelectorAll","randomColor","Math","round","random","getChildren","number","fragement","createDocumentFragment","i","el","createElement","className","setAttribute","style","backgroundColor","appendChild","_dragable","_dragable2","_domApi","j","l","d","addEventListener","e","target","blocks","parentNode","children","update","point","startX","startY","offsetLeft","scroll","on","button","this","clientX","clientY","documentElement","scrollLeft","body","offsetX","window","scrollTo","scrollTop","copyElm","elm","cloneNode","position","offsetY","getBoundingClientRect","margin","top","left","zIndex","width","clientWidth","exchange","arr","idx","idx2","temp","findIndex","length","getOVerlayElm","source","threshold","p1","p2","overlayWidth","min","bottom","max","overlayHeight","right","overlay","minarea","height","applyDrag","container","containers","elms","undefined","push","jlength","getAttribute","k","klength","clength","sourceElm","transform","moveX","moveY","b","a","targetIdx","cot","insertBefore","nextSibling","updateViews","_updateView","dragId","setTimeout","addClass","removeChild","removeClass","innerHTML","getElementsByTagName","index","trim","string","replace","hasClass","cls","indexOf","Error","classList","contains","curClass","classes","split","clsName","add","remove","addVendor","property","value","bindEvent","element","event","handler","attachEvent"],"mappings":"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","file":"dragable.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"./\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _dragable = __webpack_require__(1);\n\t\n\tvar _dragable2 = _interopRequireDefault(_dragable);\n\t\n\tvar _domApi = __webpack_require__(2);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction $(sel) {\n\t  return document.querySelectorAll(sel);\n\t}\n\tvar i = 7;\n\tvar j = 0;\n\twhile (i--) {\n\t  var l = ++j + 1;\n\t  $('.blocks')[i].appendChild(getChildren(l));\n\t}\n\tfunction randomColor() {\n\t  return 'rgba(' + Math.round(Math.random() * 255) + ', ' + Math.round(Math.random() * 255) + ', ' + Math.round(Math.random() * 255) + ', 1)';\n\t}\n\tfunction getChildren(number) {\n\t  var fragement = document.createDocumentFragment();\n\t  for (var i = 0; i < number; i++) {\n\t    var el = document.createElement('div');\n\t    el.className = 'drag';\n\t    el.setAttribute('drag', '');\n\t    el.style.backgroundColor = randomColor();\n\t    fragement.appendChild(el);\n\t  }\n\t  return fragement;\n\t}\n\tvar d = (0, _dragable2.default)($('.blocks'));\n\t(0, _dragable2.default)($('.co'));\n\tdocument.addEventListener('click', function (e) {\n\t  if (e.target.className === 'addone') {\n\t    var blocks = e.target.parentNode.children[0];\n\t    blocks.appendChild(getChildren(1));\n\t    d.update();\n\t  }\n\t});\n\t\n\tvar point = {\n\t  startX: 0,\n\t  startY: 0,\n\t  offsetLeft: 0\n\t};\n\tvar scroll = false;\n\t(0, _domApi.on)($('.co')[0], 'mousedown', function (e) {\n\t  if (e.button === 0 && e.target === this) {\n\t    point.startX = e.clientX;\n\t    point.startY = e.clientY;\n\t    point.offsetLeft = document.documentElement.scrollLeft || document.body.scrollLeft;\n\t    scroll = true;\n\t  }\n\t  return;\n\t});\n\t(0, _domApi.on)($('.co')[0], 'mousemove', function (e) {\n\t  if (scroll) {\n\t    var offsetX = point.startX - e.clientX;\n\t    window.scrollTo(point.offsetLeft + offsetX, document.documentElement.scrollTop || document.body.scrollTop);\n\t  }\n\t});\n\t(0, _domApi.on)($('.co')[0], 'mouseup', function (e) {\n\t  scroll = false;\n\t});\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _domApi = __webpack_require__(2);\n\t\n\tfunction copyElm(elm) {\n\t  var el = elm.cloneNode(true);\n\t  el.style.position = 'absolute';\n\t  var offsetX = document.documentElement.scrollLeft || document.body.scrollLeft;\n\t  var offsetY = document.documentElement.scrollTop || document.body.scrollTop;\n\t  var position = elm.getBoundingClientRect();\n\t  el.style.margin = '0px';\n\t  el.style.top = position.top + offsetY + 'px';\n\t  el.style.left = position.left + offsetX + 'px';\n\t  el.style.zIndex = 9999;\n\t  el.style.width = elm.clientWidth + 'px';\n\t  return el;\n\t}\n\t\n\tfunction exchange(arr, idx, idx2) {\n\t  var temp = arr[idx];\n\t  arr[idx] = arr[idx2];\n\t  arr[idx2] = temp;\n\t}\n\t\n\tfunction findIndex(arr, target) {\n\t  var i = arr.length;\n\t  while (i--) {\n\t    if (arr[i] === target) {\n\t      return i;\n\t    }\n\t  }\n\t  return -1;\n\t}\n\t// 成功则返回target 能不能用VDOM保存起来这些数据\n\tfunction getOVerlayElm(source, target, threshold) {\n\t  var p1 = source.getBoundingClientRect();\n\t  var p2 = target.getBoundingClientRect();\n\t  var overlayWidth = Math.min(p1.bottom, p2.bottom) - Math.max(p1.top, p2.top);\n\t  var overlayHeight = Math.min(p1.right, p2.right) - Math.max(p1.left, p2.left);\n\t  if (overlayWidth > 0 && overlayHeight > 0) {\n\t    var overlay = overlayWidth * overlayHeight;\n\t    var minarea = Math.min(p1.width * p1.height, p2.width * p2.height);\n\t    if (overlay / minarea > threshold) {\n\t      // 表示target元素被souce覆盖了！\n\t      return target;\n\t    }\n\t  }\n\t  return null;\n\t}\n\t\n\t/* **********core*********** */\n\tfunction applyDrag(container) {\n\t  var containers = [];\n\t  var elms = [];\n\t  if (container.length !== undefined) {\n\t    for (var i = 0, l = container.length; i < l; i++) {\n\t      var children = container[i].children;\n\t      containers.push(container[i]);\n\t      for (var j = 0, jlength = children.length; j < jlength; j++) {\n\t        if (children[j].getAttribute('drag') !== null) {\n\t          elms.push(children[j]);\n\t        }\n\t      }\n\t    }\n\t  } else {\n\t    containers.push(container);\n\t    children = container.children;\n\t    for (var k = 0, klength = children.length; k < klength; k++) {\n\t      if (children[k].getAttribute('drag') !== null) {\n\t        elms.push(children[j]);\n\t      }\n\t    }\n\t  }\n\t  var length = elms.length;\n\t  var clength = containers.length;\n\t  return function (elm, sourceElm, point) {\n\t    elm.style.transform = 'translate3d(' + (point.moveX - point.startX) + 'px, ' + (point.moveY - point.startY) + 'px, 0) rotate(5deg)';\n\t    var a = elm.getBoundingClientRect();\n\t    var el;\n\t    var i = length;\n\t    var j = clength;\n\t    var b;\n\t    var targetIdx = findIndex(elms, sourceElm);\n\t    // 判断它们的容器，是否与容器重合且容器为空，如果为空则添加到空容器中\n\t    while (j--) {\n\t      var cot = containers[j];\n\t      if (cot === sourceElm.parentNode) continue;\n\t      if (cot.children.length === 0 && getOVerlayElm(elm, cot.parentNode, 0.7)) {\n\t        cot.appendChild(sourceElm);\n\t        return;\n\t      }\n\t    }\n\t    while (i--) {\n\t      el = elms[i];\n\t      if (el === sourceElm) {\n\t        continue;\n\t      }\n\t      // 覆盖面积达到百分之七十的元素\n\t      // 1.如果该元素于sourceElm属于一个父容器，则\n\t      // 1.1 如果sourceElm粗线在el之前，则 insertBefore(sourceElm, el.nextSibling)\n\t      // 1.2 如果sourceElm粗线在el之后，则 insertBefore(sourceElm, el)\n\t      // 2. 如果el与sourceElm不属于同一个父容器\n\t      // 2.1 如果a.top > b.top 则 insertBefore(sourceElm, el.nextSibling)\n\t      // 2.2 如果 a.bottom < b.bottom 则 insertBefore(sourceElm, el)\n\t      if (el.parentNode === sourceElm.parentNode) {\n\t        if (getOVerlayElm(elm, el, 0.7)) {\n\t          if (targetIdx < i) {\n\t            el.parentNode.insertBefore(sourceElm, el.nextSibling);\n\t            exchange(elms, targetIdx, i);\n\t          } else if (targetIdx > i) {\n\t            el.parentNode.insertBefore(sourceElm, el);\n\t            exchange(elms, targetIdx, i);\n\t          }\n\t          return;\n\t        }\n\t      } else if (getOVerlayElm(elm, el, 0.3)) {\n\t        b = el.getBoundingClientRect();\n\t        if (a.top > b.top) {\n\t          el.parentNode.insertBefore(sourceElm, el.nextSibling);\n\t        } else if (a.bottom < b.bottom) {\n\t          el.parentNode.insertBefore(sourceElm, el);\n\t        }\n\t        return;\n\t      }\n\t    }\n\t  };\n\t}\n\t\n\t// 给每个容器打标签\n\tvar idx = 0;\n\t// 存放各个容器下的updateView方法\n\tvar updateViews = {};\n\tvar _updateView = null;\n\t// 拖动的元素，拖动的时候其实它是source创建出来的副本\n\tvar target = null;\n\t// 选中的拖动元素\n\tvar source = null;\n\tvar point = {\n\t  startX: 0,\n\t  startY: 0,\n\t  moveX: 0,\n\t  moveY: 0\n\t};\n\t// 监听全局鼠标按下事件\n\t// 如果该元素包含drag属性，则启用drag方法\n\t(0, _domApi.on)(document, 'mousedown', function (e) {\n\t  if (e.button === 0 && e.target.getAttribute('drag') !== null) {\n\t    point.startX = e.clientX;\n\t    point.startY = e.clientY;\n\t    var dragId = e.target.parentNode.getAttribute('drag-id');\n\t    if (dragId === undefined) return;\n\t    _updateView = updateViews[dragId];\n\t    setTimeout(function () {\n\t      source = e.target;\n\t      target = copyElm(source);\n\t      (0, _domApi.addClass)(source, 'drag-mask');\n\t      document.body.appendChild(target);\n\t    });\n\t  }\n\t});\n\t\n\t(0, _domApi.on)(document, 'mousemove', function (e) {\n\t  if (target !== null) {\n\t    point.moveX = e.clientX;\n\t    point.moveY = e.clientY;\n\t    _updateView(target, source, point);\n\t  }\n\t});\n\t\n\t(0, _domApi.on)(document, 'mouseup', function () {\n\t  if (target) {\n\t    document.body.removeChild(target);\n\t    (0, _domApi.removeClass)(source, 'drag-mask');\n\t    target = null;\n\t  }\n\t});\n\t\n\t// 生成drag-mask样式\n\tvar style = document.createElement('style');\n\tstyle.innerHTML = '.drag-mask::after {\\n  content: \"\";\\n  position: absolute;\\n  top:0;\\n  left:0;\\n  width: 100%;\\n  height: 100%;\\n  background-color: #c0c6ca;\\n  user-select: none;\\n  -webkit-user-select:none;\\n  -moz-user-select: none;\\n  z-index: 9999;\\n  border-radius: 4px;\\n}\\n[drag] {\\n  position: relative;\\n  cursor: pointer;\\n  box-sizing: border-box;\\n}';\n\t\n\tdocument.getElementsByTagName('head')[0].appendChild(style);\n\t\n\tmodule.exports = function (elms) {\n\t  var index = idx++;\n\t  if (elms.length === undefined) {\n\t    elms.setAttribute('drag-id', index);\n\t  } else {\n\t    for (var i = 0, l = elms.length; i < l; i++) {\n\t      elms[i].setAttribute('drag-id', index);\n\t    }\n\t  }\n\t  updateViews[index] = applyDrag(elms);\n\t  return {\n\t    update: function update() {\n\t      updateViews[index] = applyDrag(elms);\n\t    }\n\t  };\n\t};\n\n/***/ },\n/* 2 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tvar trim = function trim(string) {\n\t  return (string || '').replace(/^[\\s\\uFEFF]+|[\\s\\uFEFF]+$/g, '');\n\t};\n\t\n\tvar hasClass = function hasClass(el, cls) {\n\t  if (!el || !cls) return false;\n\t  if (cls.indexOf(' ') !== -1) throw new Error('className should not contain space.');\n\t  if (el.classList) {\n\t    return el.classList.contains(cls);\n\t  } else {\n\t    return (' ' + el.className + ' ').indexOf(' ' + cls + ' ') > -1;\n\t  }\n\t};\n\t\n\tvar addClass = function addClass(el, cls) {\n\t  if (!el) return;\n\t  var curClass = el.className;\n\t  var classes = (cls || '').split(' ');\n\t\n\t  for (var i = 0, j = classes.length; i < j; i++) {\n\t    var clsName = classes[i];\n\t    if (!clsName) continue;\n\t\n\t    if (el.classList) {\n\t      el.classList.add(clsName);\n\t    } else {\n\t      if (!hasClass(el, clsName)) {\n\t        curClass += ' ' + clsName;\n\t      }\n\t    }\n\t  }\n\t  if (!el.classList) {\n\t    el.className = curClass;\n\t  }\n\t};\n\t\n\tvar removeClass = function removeClass(el, cls) {\n\t  if (!el || !cls) return;\n\t  var classes = cls.split(' ');\n\t  var curClass = ' ' + el.className + ' ';\n\t\n\t  for (var i = 0, j = classes.length; i < j; i++) {\n\t    var clsName = classes[i];\n\t    if (!clsName) continue;\n\t\n\t    if (el.classList) {\n\t      el.classList.remove(clsName);\n\t    } else {\n\t      if (hasClass(el, clsName)) {\n\t        curClass = curClass.replace(' ' + clsName + ' ', ' ');\n\t      }\n\t    }\n\t  }\n\t  if (!el.classList) {\n\t    el.className = trim(curClass);\n\t  }\n\t};\n\t\n\tvar addVendor = function addVendor(property, value) {\n\t  return property + ':' + value;\n\t};\n\t\n\tvar bindEvent = function () {\n\t  if (document.addEventListener) {\n\t    return function (element, event, handler) {\n\t      if (element && event && handler) {\n\t        element.addEventListener(event, handler, false);\n\t      }\n\t    };\n\t  } else {\n\t    return function (element, event, handler) {\n\t      if (element && event && handler) {\n\t        element.attachEvent('on' + event, handler);\n\t      }\n\t    };\n\t  }\n\t}();\n\t\n\tmodule.exports = {\n\t  hasClass: hasClass,\n\t  addClass: addClass,\n\t  removeClass: removeClass,\n\t  addVendor: addVendor,\n\t  on: bindEvent\n\t};\n\n/***/ }\n/******/ ]);\n\n\n/** WEBPACK FOOTER **\n ** dragable.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"./\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap e260aac204b5a9792963\n **/","import dragable from './dragable'\r\nimport { on } from './domApi'\r\n\r\nfunction $ (sel) {\r\n  return document.querySelectorAll(sel)\r\n}\r\nvar i = 7\r\nvar j = 0\r\nwhile (i--) {\r\n  var l = ++j + 1\r\n  $('.blocks')[i].appendChild(getChildren(l))\r\n}\r\nfunction randomColor () {\r\n  return `rgba(${Math.round(Math.random() * 255)}, ${Math.round(Math.random() * 255)}, ${Math.round(Math.random() * 255)}, 1)`\r\n}\r\nfunction getChildren (number) {\r\n  var fragement = document.createDocumentFragment()\r\n  for (var i = 0; i < number; i++) {\r\n    var el = document.createElement('div')\r\n    el.className = 'drag'\r\n    el.setAttribute('drag', '')\r\n    el.style.backgroundColor = randomColor()\r\n    fragement.appendChild(el)\r\n  }\r\n  return fragement\r\n}\r\nvar d = dragable($('.blocks'))\r\ndragable($('.co'))\r\ndocument.addEventListener('click', function (e) {\r\n  if (e.target.className === 'addone') {\r\n    var blocks = e.target.parentNode.children[0]\r\n    blocks.appendChild(getChildren(1))\r\n    d.update()\r\n  }\r\n})\r\n\r\nvar point = {\r\n  startX: 0,\r\n  startY: 0,\r\n  offsetLeft: 0\r\n}\r\nvar scroll = false\r\non($('.co')[0], 'mousedown', function (e) {\r\n  if (e.button === 0 && e.target === this) {\r\n    point.startX = e.clientX\r\n    point.startY = e.clientY\r\n    point.offsetLeft = document.documentElement.scrollLeft || document.body.scrollLeft\r\n    scroll = true\r\n  }\r\n  return\r\n})\r\non($('.co')[0], 'mousemove', function (e) {\r\n  if (scroll) {\r\n    var offsetX = point.startX - e.clientX\r\n    window.scrollTo(point.offsetLeft + offsetX, document.documentElement.scrollTop || document.body.scrollTop)\r\n  }\r\n})\r\non($('.co')[0], 'mouseup', function (e) {\r\n  scroll = false\r\n})\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/main.js\n **/","import { on, addClass, removeClass } from './domApi'\r\n\r\nfunction copyElm (elm) {\r\n  var el = elm.cloneNode(true)\r\n  el.style.position = 'absolute'\r\n  var offsetX = document.documentElement.scrollLeft || document.body.scrollLeft\r\n  var offsetY = document.documentElement.scrollTop || document.body.scrollTop\r\n  var position = elm.getBoundingClientRect()\r\n  el.style.margin = '0px'\r\n  el.style.top = position.top + offsetY + 'px'\r\n  el.style.left = position.left + offsetX + 'px'\r\n  el.style.zIndex = 9999\r\n  el.style.width = elm.clientWidth + 'px'\r\n  return el\r\n}\r\n\r\nfunction exchange (arr, idx, idx2) {\r\n  var temp = arr[idx]\r\n  arr[idx] = arr[idx2]\r\n  arr[idx2] = temp\r\n}\r\n\r\nfunction findIndex (arr, target) {\r\n  var i = arr.length\r\n  while (i--) {\r\n    if (arr[i] === target) {\r\n      return i\r\n    }\r\n  }\r\n  return -1\r\n}\r\n// 成功则返回target 能不能用VDOM保存起来这些数据\r\nfunction getOVerlayElm (source, target, threshold) {\r\n  var p1 = source.getBoundingClientRect()\r\n  var p2 = target.getBoundingClientRect()\r\n  var overlayWidth = (Math.min(p1.bottom, p2.bottom) - Math.max(p1.top, p2.top))\r\n  var overlayHeight = (Math.min(p1.right, p2.right) - Math.max(p1.left, p2.left))\r\n  if (overlayWidth > 0 && overlayHeight > 0) {\r\n    var overlay = overlayWidth * overlayHeight\r\n    var minarea = Math.min(p1.width * p1.height, p2.width * p2.height)\r\n    if (overlay / minarea > threshold) {\r\n      // 表示target元素被souce覆盖了！\r\n      return target\r\n    }\r\n  }\r\n  return null\r\n}\r\n\r\n/* **********core*********** */\r\nfunction applyDrag (container) {\r\n  var containers = []\r\n  var elms = []\r\n  if (container.length !== undefined) {\r\n    for (var i = 0, l = container.length; i < l; i++) {\r\n      var children = container[i].children\r\n      containers.push(container[i])\r\n      for (var j = 0, jlength = children.length; j < jlength; j++) {\r\n        if (children[j].getAttribute('drag') !== null) {\r\n          elms.push(children[j])\r\n        }\r\n      }\r\n    }\r\n  } else {\r\n    containers.push(container)\r\n    children = container.children\r\n    for (var k = 0, klength = children.length; k < klength; k++) {\r\n      if (children[k].getAttribute('drag') !== null) {\r\n        elms.push(children[j])\r\n      }\r\n    }\r\n  }\r\n  var length = elms.length\r\n  var clength = containers.length\r\n  return function (elm, sourceElm, point) {\r\n    elm.style.transform = `translate3d(${point.moveX - point.startX}px, ${point.moveY - point.startY}px, 0) rotate(5deg)`\r\n    var a = elm.getBoundingClientRect()\r\n    var el\r\n    var i = length\r\n    var j = clength\r\n    var b\r\n    var targetIdx = findIndex(elms, sourceElm)\r\n    // 判断它们的容器，是否与容器重合且容器为空，如果为空则添加到空容器中\r\n    while (j--) {\r\n      var cot = containers[j]\r\n      if (cot === sourceElm.parentNode) continue\r\n      if (cot.children.length === 0 && getOVerlayElm(elm, cot.parentNode, 0.7)) {\r\n        cot.appendChild(sourceElm)\r\n        return\r\n      }\r\n    }\r\n    while (i--) {\r\n      el = elms[i]\r\n      if (el === sourceElm) {\r\n        continue\r\n      }\r\n        // 覆盖面积达到百分之七十的元素\r\n        // 1.如果该元素于sourceElm属于一个父容器，则\r\n        // 1.1 如果sourceElm粗线在el之前，则 insertBefore(sourceElm, el.nextSibling)\r\n        // 1.2 如果sourceElm粗线在el之后，则 insertBefore(sourceElm, el)\r\n        // 2. 如果el与sourceElm不属于同一个父容器\r\n        // 2.1 如果a.top > b.top 则 insertBefore(sourceElm, el.nextSibling)\r\n        // 2.2 如果 a.bottom < b.bottom 则 insertBefore(sourceElm, el)\r\n      if (el.parentNode === sourceElm.parentNode) {\r\n        if (getOVerlayElm(elm, el, 0.7)) {\r\n          if (targetIdx < i) {\r\n            el.parentNode.insertBefore(sourceElm, el.nextSibling)\r\n            exchange(elms, targetIdx, i)\r\n          } else if (targetIdx > i) {\r\n            el.parentNode.insertBefore(sourceElm, el)\r\n            exchange(elms, targetIdx, i)\r\n          }\r\n          return\r\n        }\r\n      } else if (getOVerlayElm(elm, el, 0.3)) {\r\n        b = el.getBoundingClientRect()\r\n        if (a.top > b.top) {\r\n          el.parentNode.insertBefore(sourceElm, el.nextSibling)\r\n        } else if (a.bottom < b.bottom) {\r\n          el.parentNode.insertBefore(sourceElm, el)\r\n        }\r\n        return\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n// 给每个容器打标签\r\nvar idx = 0\r\n// 存放各个容器下的updateView方法\r\nvar updateViews = {}\r\nvar _updateView = null\r\n// 拖动的元素，拖动的时候其实它是source创建出来的副本\r\nvar target = null\r\n// 选中的拖动元素\r\nvar source = null\r\nvar point = {\r\n  startX: 0,\r\n  startY: 0,\r\n  moveX: 0,\r\n  moveY: 0\r\n}\r\n// 监听全局鼠标按下事件\r\n// 如果该元素包含drag属性，则启用drag方法\r\non(document, 'mousedown', function (e) {\r\n  if (e.button === 0 && e.target.getAttribute('drag') !== null) {\r\n    point.startX = e.clientX\r\n    point.startY = e.clientY\r\n    var dragId = e.target.parentNode.getAttribute('drag-id')\r\n    if (dragId === undefined) return\r\n    _updateView = updateViews[dragId]\r\n    setTimeout(function () {\r\n      source = e.target\r\n      target = copyElm(source)\r\n      addClass(source, 'drag-mask')\r\n      document.body.appendChild(target)\r\n    })\r\n  }\r\n})\r\n\r\non(document, 'mousemove', function (e) {\r\n  if (target !== null) {\r\n    point.moveX = e.clientX\r\n    point.moveY = e.clientY\r\n    _updateView(target, source, point)\r\n  }\r\n})\r\n\r\non(document, 'mouseup', function () {\r\n  if (target) {\r\n    document.body.removeChild(target)\r\n    removeClass(source, 'drag-mask')\r\n    target = null\r\n  }\r\n})\r\n\r\n// 生成drag-mask样式\r\nvar style = document.createElement('style')\r\nstyle.innerHTML = `.drag-mask::after {\r\n  content: \"\";\r\n  position: absolute;\r\n  top:0;\r\n  left:0;\r\n  width: 100%;\r\n  height: 100%;\r\n  background-color: #c0c6ca;\r\n  user-select: none;\r\n  -webkit-user-select:none;\r\n  -moz-user-select: none;\r\n  z-index: 9999;\r\n  border-radius: 4px;\r\n}\r\n[drag] {\r\n  position: relative;\r\n  cursor: pointer;\r\n  box-sizing: border-box;\r\n}`\r\n\r\ndocument.getElementsByTagName('head')[0].appendChild(style)\r\n\r\nmodule.exports = function (elms) {\r\n  var index = idx++\r\n  if (elms.length === undefined) {\r\n    elms.setAttribute('drag-id', index)\r\n  } else {\r\n    for (var i = 0, l = elms.length; i < l; i++) {\r\n      elms[i].setAttribute('drag-id', index)\r\n    }\r\n  }\r\n  updateViews[index] = applyDrag(elms)\r\n  return {\r\n    update: function () {\r\n      updateViews[index] = applyDrag(elms)\r\n    }\r\n  }\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/dragable.js\n **/","var trim = function (string) {\r\n  return (string || '').replace(/^[\\s\\uFEFF]+|[\\s\\uFEFF]+$/g, '')\r\n}\r\n\r\nvar hasClass = function (el, cls) {\r\n  if (!el || !cls) return false\r\n  if (cls.indexOf(' ') !== -1) throw new Error('className should not contain space.')\r\n  if (el.classList) {\r\n    return el.classList.contains(cls)\r\n  } else {\r\n    return (' ' + el.className + ' ').indexOf(' ' + cls + ' ') > -1\r\n  }\r\n}\r\n\r\nvar addClass = function (el, cls) {\r\n  if (!el) return\r\n  var curClass = el.className\r\n  var classes = (cls || '').split(' ')\r\n\r\n  for (var i = 0, j = classes.length; i < j; i++) {\r\n    var clsName = classes[ i ]\r\n    if (!clsName) continue\r\n\r\n    if (el.classList) {\r\n      el.classList.add(clsName)\r\n    } else {\r\n      if (!hasClass(el, clsName)) {\r\n        curClass += ' ' + clsName\r\n      }\r\n    }\r\n  }\r\n  if (!el.classList) {\r\n    el.className = curClass\r\n  }\r\n}\r\n\r\nvar removeClass = function (el, cls) {\r\n  if (!el || !cls) return\r\n  var classes = cls.split(' ')\r\n  var curClass = ' ' + el.className + ' '\r\n\r\n  for (var i = 0, j = classes.length; i < j; i++) {\r\n    var clsName = classes[ i ]\r\n    if (!clsName) continue\r\n\r\n    if (el.classList) {\r\n      el.classList.remove(clsName)\r\n    } else {\r\n      if (hasClass(el, clsName)) {\r\n        curClass = curClass.replace(' ' + clsName + ' ', ' ')\r\n      }\r\n    }\r\n  }\r\n  if (!el.classList) {\r\n    el.className = trim(curClass)\r\n  }\r\n}\r\n\r\nvar addVendor = function (property, value) {\r\n  return property + ':' + value\r\n}\r\n\r\nvar bindEvent = (function () {\r\n  if (document.addEventListener) {\r\n    return function (element, event, handler) {\r\n      if (element && event && handler) {\r\n        element.addEventListener(event, handler, false)\r\n      }\r\n    }\r\n  } else {\r\n    return function (element, event, handler) {\r\n      if (element && event && handler) {\r\n        element.attachEvent('on' + event, handler)\r\n      }\r\n    }\r\n  }\r\n})()\r\n\r\nmodule.exports = {\r\n  hasClass: hasClass,\r\n  addClass: addClass,\r\n  removeClass: removeClass,\r\n  addVendor,\r\n  on: bindEvent\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/domApi.js\n **/"],"sourceRoot":""}