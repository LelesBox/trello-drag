{"version":3,"sources":["webpack:///dragable.js","webpack:///webpack/bootstrap 6e8c56b3d63a7c9fb54b","webpack:///./src/main.js","webpack:///./src/dragable.js","webpack:///./src/domApi.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","_interopRequireDefault","obj","__esModule","default","$","sel","document","querySelectorAll","randomColor","Math","round","random","getChildren","number","fragement","createDocumentFragment","i","el","createElement","className","setAttribute","style","backgroundColor","appendChild","_dragable","_dragable2","j","l","d","addEventListener","e","target","blocks","parentNode","children","update","copyElm","elm","cloneNode","position","offsetX","documentElement","scrollLeft","body","offsetY","scrollTop","getBoundingClientRect","margin","top","left","zIndex","width","clientWidth","exchange","arr","idx","idx2","temp","findIndex","length","getOVerlayElm","source","threshold","p1","p2","overlayWidth","min","bottom","max","overlayHeight","right","overlay","minarea","height","applyDrag","container","containers","elms","undefined","push","jlength","getAttribute","k","klength","clength","sourceElm","point","transform","moveX","startX","moveY","startY","b","a","targetIdx","cot","insertBefore","nextSibling","_domApi","updateViews","_updateView","on","clientX","clientY","dragId","setTimeout","addClass","removeChild","removeClass","innerHTML","getElementsByTagName","index","trim","string","replace","hasClass","cls","indexOf","Error","classList","contains","curClass","classes","split","clsName","add","remove","addVendor","property","value","bindEvent","element","event","handler","attachEvent"],"mappings":"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","file":"dragable.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"./\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _dragable = __webpack_require__(1);\n\t\n\tvar _dragable2 = _interopRequireDefault(_dragable);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction $(sel) {\n\t  return document.querySelectorAll(sel);\n\t}\n\tvar i = 7;\n\tvar j = 0;\n\twhile (i--) {\n\t  var l = ++j + 1;\n\t  $('.blocks')[i].appendChild(getChildren(l));\n\t}\n\tfunction randomColor() {\n\t  return 'rgba(' + Math.round(Math.random() * 255) + ', ' + Math.round(Math.random() * 255) + ', ' + Math.round(Math.random() * 255) + ', 1)';\n\t}\n\tfunction getChildren(number) {\n\t  var fragement = document.createDocumentFragment();\n\t  for (var i = 0; i < number; i++) {\n\t    var el = document.createElement('div');\n\t    el.className = 'drag';\n\t    el.setAttribute('drag', '');\n\t    el.style.backgroundColor = randomColor();\n\t    fragement.appendChild(el);\n\t  }\n\t  return fragement;\n\t}\n\tvar d = (0, _dragable2.default)($('.blocks'));\n\t(0, _dragable2.default)($('.co'));\n\tdocument.addEventListener('click', function (e) {\n\t  if (e.target.className === 'addone') {\n\t    var blocks = e.target.parentNode.children[0];\n\t    blocks.appendChild(getChildren(1));\n\t    d.update();\n\t  }\n\t});\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _domApi = __webpack_require__(2);\n\t\n\tfunction copyElm(elm) {\n\t  var el = elm.cloneNode(true);\n\t  el.style.position = 'absolute';\n\t  var offsetX = document.documentElement.scrollLeft || document.body.scrollLeft;\n\t  var offsetY = document.documentElement.scrollTop || document.body.scrollTop;\n\t  var position = elm.getBoundingClientRect();\n\t  el.style.margin = '0px';\n\t  el.style.top = position.top + offsetY + 'px';\n\t  el.style.left = position.left + offsetX + 'px';\n\t  el.style.zIndex = 9999;\n\t  el.style.width = elm.clientWidth + 'px';\n\t  return el;\n\t}\n\t\n\tfunction exchange(arr, idx, idx2) {\n\t  var temp = arr[idx];\n\t  arr[idx] = arr[idx2];\n\t  arr[idx2] = temp;\n\t}\n\t\n\tfunction findIndex(arr, target) {\n\t  var i = arr.length;\n\t  while (i--) {\n\t    if (arr[i] === target) {\n\t      return i;\n\t    }\n\t  }\n\t  return -1;\n\t}\n\t// 成功则返回target 能不能用VDOM保存起来这些数据\n\tfunction getOVerlayElm(source, target, threshold) {\n\t  var p1 = source.getBoundingClientRect();\n\t  var p2 = target.getBoundingClientRect();\n\t  var overlayWidth = Math.min(p1.bottom, p2.bottom) - Math.max(p1.top, p2.top);\n\t  var overlayHeight = Math.min(p1.right, p2.right) - Math.max(p1.left, p2.left);\n\t  if (overlayWidth > 0 && overlayHeight > 0) {\n\t    var overlay = overlayWidth * overlayHeight;\n\t    var minarea = Math.min(p1.width * p1.height, p2.width * p2.height);\n\t    if (overlay / minarea > threshold) {\n\t      // 表示target元素被souce覆盖了！\n\t      return target;\n\t    }\n\t  }\n\t  return null;\n\t}\n\t\n\t/* **********core*********** */\n\tfunction applyDrag(container) {\n\t  var containers = [];\n\t  var elms = [];\n\t  if (container.length !== undefined) {\n\t    for (var i = 0, l = container.length; i < l; i++) {\n\t      var children = container[i].children;\n\t      containers.push(container[i]);\n\t      for (var j = 0, jlength = children.length; j < jlength; j++) {\n\t        if (children[j].getAttribute('drag') !== null) {\n\t          elms.push(children[j]);\n\t        }\n\t      }\n\t    }\n\t  } else {\n\t    containers.push(container);\n\t    children = container.children;\n\t    for (var k = 0, klength = children.length; k < klength; k++) {\n\t      if (children[k].getAttribute('drag') !== null) {\n\t        elms.push(children[j]);\n\t      }\n\t    }\n\t  }\n\t  var length = elms.length;\n\t  var clength = containers.length;\n\t  return function (elm, sourceElm, point) {\n\t    elm.style.transform = 'translate3d(' + (point.moveX - point.startX) + 'px, ' + (point.moveY - point.startY) + 'px, 0) rotate(5deg)';\n\t    var a = elm.getBoundingClientRect();\n\t    var el;\n\t    var i = length;\n\t    var j = clength;\n\t    var b;\n\t    var targetIdx = findIndex(elms, sourceElm);\n\t    // 判断它们的容器，是否与容器重合且容器为空，如果为空则添加到空容器中\n\t    while (j--) {\n\t      var cot = containers[j];\n\t      if (cot === sourceElm.parentNode) continue;\n\t      if (cot.children.length === 0 && getOVerlayElm(elm, cot.parentNode, 0.7)) {\n\t        cot.appendChild(sourceElm);\n\t        return;\n\t      }\n\t    }\n\t    while (i--) {\n\t      el = elms[i];\n\t      if (el === sourceElm) {\n\t        continue;\n\t      }\n\t      // 覆盖面积达到百分之七十的元素\n\t      // 1.如果该元素于sourceElm属于一个父容器，则\n\t      // 1.1 如果sourceElm粗线在el之前，则 insertBefore(sourceElm, el.nextSibling)\n\t      // 1.2 如果sourceElm粗线在el之后，则 insertBefore(sourceElm, el)\n\t      // 2. 如果el与sourceElm不属于同一个父容器\n\t      // 2.1 如果a.top > b.top 则 insertBefore(sourceElm, el.nextSibling)\n\t      // 2.2 如果 a.bottom < b.bottom 则 insertBefore(sourceElm, el)\n\t      if (el.parentNode === sourceElm.parentNode) {\n\t        if (getOVerlayElm(elm, el, 0.7)) {\n\t          if (targetIdx < i) {\n\t            el.parentNode.insertBefore(sourceElm, el.nextSibling);\n\t            exchange(elms, targetIdx, i);\n\t          } else if (targetIdx > i) {\n\t            el.parentNode.insertBefore(sourceElm, el);\n\t            exchange(elms, targetIdx, i);\n\t          }\n\t          return;\n\t        }\n\t      } else if (getOVerlayElm(elm, el, 0.3)) {\n\t        b = el.getBoundingClientRect();\n\t        if (a.top > b.top) {\n\t          el.parentNode.insertBefore(sourceElm, el.nextSibling);\n\t        } else if (a.bottom < b.bottom) {\n\t          el.parentNode.insertBefore(sourceElm, el);\n\t        }\n\t        return;\n\t      }\n\t    }\n\t  };\n\t}\n\t\n\t// 给每个容器打标签\n\tvar idx = 0;\n\t// 存放各个容器下的updateView方法\n\tvar updateViews = {};\n\tvar _updateView = null;\n\t// 拖动的元素，拖动的时候其实它是source创建出来的副本\n\tvar target = null;\n\t// 选中的拖动元素\n\tvar source = null;\n\tvar point = {\n\t  startX: 0,\n\t  startY: 0,\n\t  moveX: 0,\n\t  moveY: 0\n\t};\n\t// 监听全局鼠标按下事件\n\t// 如果该元素包含drag属性，则启用drag方法\n\t(0, _domApi.on)(document, 'mousedown', function (e) {\n\t  if (e.target.getAttribute('drag') !== null) {\n\t    point.startX = e.clientX;\n\t    point.startY = e.clientY;\n\t    var dragId = e.target.parentNode.getAttribute('drag-id');\n\t    if (dragId === undefined) return;\n\t    _updateView = updateViews[dragId];\n\t    setTimeout(function () {\n\t      source = e.target;\n\t      target = copyElm(source);\n\t      (0, _domApi.addClass)(source, 'drag-mask');\n\t      document.body.appendChild(target);\n\t    });\n\t  }\n\t});\n\t\n\t(0, _domApi.on)(document, 'mousemove', function (e) {\n\t  if (target !== null) {\n\t    point.moveX = e.clientX;\n\t    point.moveY = e.clientY;\n\t    _updateView(target, source, point);\n\t  }\n\t});\n\t\n\t(0, _domApi.on)(document, 'mouseup', function () {\n\t  if (target) {\n\t    document.body.removeChild(target);\n\t    (0, _domApi.removeClass)(source, 'drag-mask');\n\t    target = null;\n\t  }\n\t});\n\t\n\t// 生成drag-mask样式\n\tvar style = document.createElement('style');\n\tstyle.innerHTML = '.drag-mask::after {\\n  content: \"\";\\n  position: absolute;\\n  top:0;\\n  left:0;\\n  width: 100%;\\n  height: 100%;\\n  background-color: #c0c6ca;\\n  user-select: none;\\n  -webkit-user-select:none;\\n  -moz-user-select: none;\\n  z-index: 9999;\\n  border-radius: 4px;\\n}\\n[drag] {\\n  position: relative;\\n  cursor: pointer;\\n  box-sizing: border-box;\\n}';\n\t\n\tdocument.getElementsByTagName('head')[0].appendChild(style);\n\t\n\tmodule.exports = function (elms) {\n\t  var index = idx++;\n\t  if (elms.length === undefined) {\n\t    elms.setAttribute('drag-id', index);\n\t  } else {\n\t    for (var i = 0, l = elms.length; i < l; i++) {\n\t      elms[i].setAttribute('drag-id', index);\n\t    }\n\t  }\n\t  updateViews[index] = applyDrag(elms);\n\t  return {\n\t    update: function update() {\n\t      updateViews[index] = applyDrag(elms);\n\t    }\n\t  };\n\t};\n\n/***/ },\n/* 2 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tvar trim = function trim(string) {\n\t  return (string || '').replace(/^[\\s\\uFEFF]+|[\\s\\uFEFF]+$/g, '');\n\t};\n\t\n\tvar hasClass = function hasClass(el, cls) {\n\t  if (!el || !cls) return false;\n\t  if (cls.indexOf(' ') !== -1) throw new Error('className should not contain space.');\n\t  if (el.classList) {\n\t    return el.classList.contains(cls);\n\t  } else {\n\t    return (' ' + el.className + ' ').indexOf(' ' + cls + ' ') > -1;\n\t  }\n\t};\n\t\n\tvar addClass = function addClass(el, cls) {\n\t  if (!el) return;\n\t  var curClass = el.className;\n\t  var classes = (cls || '').split(' ');\n\t\n\t  for (var i = 0, j = classes.length; i < j; i++) {\n\t    var clsName = classes[i];\n\t    if (!clsName) continue;\n\t\n\t    if (el.classList) {\n\t      el.classList.add(clsName);\n\t    } else {\n\t      if (!hasClass(el, clsName)) {\n\t        curClass += ' ' + clsName;\n\t      }\n\t    }\n\t  }\n\t  if (!el.classList) {\n\t    el.className = curClass;\n\t  }\n\t};\n\t\n\tvar removeClass = function removeClass(el, cls) {\n\t  if (!el || !cls) return;\n\t  var classes = cls.split(' ');\n\t  var curClass = ' ' + el.className + ' ';\n\t\n\t  for (var i = 0, j = classes.length; i < j; i++) {\n\t    var clsName = classes[i];\n\t    if (!clsName) continue;\n\t\n\t    if (el.classList) {\n\t      el.classList.remove(clsName);\n\t    } else {\n\t      if (hasClass(el, clsName)) {\n\t        curClass = curClass.replace(' ' + clsName + ' ', ' ');\n\t      }\n\t    }\n\t  }\n\t  if (!el.classList) {\n\t    el.className = trim(curClass);\n\t  }\n\t};\n\t\n\tvar addVendor = function addVendor(property, value) {\n\t  return property + ':' + value;\n\t};\n\t\n\tvar bindEvent = function () {\n\t  if (document.addEventListener) {\n\t    return function (element, event, handler) {\n\t      if (element && event && handler) {\n\t        element.addEventListener(event, handler, false);\n\t      }\n\t    };\n\t  } else {\n\t    return function (element, event, handler) {\n\t      if (element && event && handler) {\n\t        element.attachEvent('on' + event, handler);\n\t      }\n\t    };\n\t  }\n\t}();\n\t\n\tmodule.exports = {\n\t  hasClass: hasClass,\n\t  addClass: addClass,\n\t  removeClass: removeClass,\n\t  addVendor: addVendor,\n\t  on: bindEvent\n\t};\n\n/***/ }\n/******/ ]);\n\n\n/** WEBPACK FOOTER **\n ** dragable.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"./\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 6e8c56b3d63a7c9fb54b\n **/","import dragable from './dragable'\n\nfunction $ (sel) {\n  return document.querySelectorAll(sel)\n}\nvar i = 7\nvar j = 0\nwhile (i--) {\n  var l = ++j + 1\n  $('.blocks')[i].appendChild(getChildren(l))\n}\nfunction randomColor () {\n  return `rgba(${Math.round(Math.random() * 255)}, ${Math.round(Math.random() * 255)}, ${Math.round(Math.random() * 255)}, 1)`\n}\nfunction getChildren (number) {\n  var fragement = document.createDocumentFragment()\n  for (var i = 0; i < number; i++) {\n    var el = document.createElement('div')\n    el.className = 'drag'\n    el.setAttribute('drag', '')\n    el.style.backgroundColor = randomColor()\n    fragement.appendChild(el)\n  }\n  return fragement\n}\nvar d = dragable($('.blocks'))\ndragable($('.co'))\ndocument.addEventListener('click', function (e) {\n  if (e.target.className === 'addone') {\n    var blocks = e.target.parentNode.children[0]\n    blocks.appendChild(getChildren(1))\n    d.update()\n  }\n})\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/main.js\n **/","import { on, addClass, removeClass } from './domApi'\n\nfunction copyElm (elm) {\n  var el = elm.cloneNode(true)\n  el.style.position = 'absolute'\n  var offsetX = document.documentElement.scrollLeft || document.body.scrollLeft\n  var offsetY = document.documentElement.scrollTop || document.body.scrollTop\n  var position = elm.getBoundingClientRect()\n  el.style.margin = '0px'\n  el.style.top = position.top + offsetY + 'px'\n  el.style.left = position.left + offsetX + 'px'\n  el.style.zIndex = 9999\n  el.style.width = elm.clientWidth + 'px'\n  return el\n}\n\nfunction exchange (arr, idx, idx2) {\n  var temp = arr[idx]\n  arr[idx] = arr[idx2]\n  arr[idx2] = temp\n}\n\nfunction findIndex (arr, target) {\n  var i = arr.length\n  while (i--) {\n    if (arr[i] === target) {\n      return i\n    }\n  }\n  return -1\n}\n// 成功则返回target 能不能用VDOM保存起来这些数据\nfunction getOVerlayElm (source, target, threshold) {\n  var p1 = source.getBoundingClientRect()\n  var p2 = target.getBoundingClientRect()\n  var overlayWidth = (Math.min(p1.bottom, p2.bottom) - Math.max(p1.top, p2.top))\n  var overlayHeight = (Math.min(p1.right, p2.right) - Math.max(p1.left, p2.left))\n  if (overlayWidth > 0 && overlayHeight > 0) {\n    var overlay = overlayWidth * overlayHeight\n    var minarea = Math.min(p1.width * p1.height, p2.width * p2.height)\n    if (overlay / minarea > threshold) {\n      // 表示target元素被souce覆盖了！\n      return target\n    }\n  }\n  return null\n}\n\n/* **********core*********** */\nfunction applyDrag (container) {\n  var containers = []\n  var elms = []\n  if (container.length !== undefined) {\n    for (var i = 0, l = container.length; i < l; i++) {\n      var children = container[i].children\n      containers.push(container[i])\n      for (var j = 0, jlength = children.length; j < jlength; j++) {\n        if (children[j].getAttribute('drag') !== null) {\n          elms.push(children[j])\n        }\n      }\n    }\n  } else {\n    containers.push(container)\n    children = container.children\n    for (var k = 0, klength = children.length; k < klength; k++) {\n      if (children[k].getAttribute('drag') !== null) {\n        elms.push(children[j])\n      }\n    }\n  }\n  var length = elms.length\n  var clength = containers.length\n  return function (elm, sourceElm, point) {\n    elm.style.transform = `translate3d(${point.moveX - point.startX}px, ${point.moveY - point.startY}px, 0) rotate(5deg)`\n    var a = elm.getBoundingClientRect()\n    var el\n    var i = length\n    var j = clength\n    var b\n    var targetIdx = findIndex(elms, sourceElm)\n    // 判断它们的容器，是否与容器重合且容器为空，如果为空则添加到空容器中\n    while (j--) {\n      var cot = containers[j]\n      if (cot === sourceElm.parentNode) continue\n      if (cot.children.length === 0 && getOVerlayElm(elm, cot.parentNode, 0.7)) {\n        cot.appendChild(sourceElm)\n        return\n      }\n    }\n    while (i--) {\n      el = elms[i]\n      if (el === sourceElm) {\n        continue\n      }\n        // 覆盖面积达到百分之七十的元素\n        // 1.如果该元素于sourceElm属于一个父容器，则\n        // 1.1 如果sourceElm粗线在el之前，则 insertBefore(sourceElm, el.nextSibling)\n        // 1.2 如果sourceElm粗线在el之后，则 insertBefore(sourceElm, el)\n        // 2. 如果el与sourceElm不属于同一个父容器\n        // 2.1 如果a.top > b.top 则 insertBefore(sourceElm, el.nextSibling)\n        // 2.2 如果 a.bottom < b.bottom 则 insertBefore(sourceElm, el)\n      if (el.parentNode === sourceElm.parentNode) {\n        if (getOVerlayElm(elm, el, 0.7)) {\n          if (targetIdx < i) {\n            el.parentNode.insertBefore(sourceElm, el.nextSibling)\n            exchange(elms, targetIdx, i)\n          } else if (targetIdx > i) {\n            el.parentNode.insertBefore(sourceElm, el)\n            exchange(elms, targetIdx, i)\n          }\n          return\n        }\n      } else if (getOVerlayElm(elm, el, 0.3)) {\n        b = el.getBoundingClientRect()\n        if (a.top > b.top) {\n          el.parentNode.insertBefore(sourceElm, el.nextSibling)\n        } else if (a.bottom < b.bottom) {\n          el.parentNode.insertBefore(sourceElm, el)\n        }\n        return\n      }\n    }\n  }\n}\n\n// 给每个容器打标签\nvar idx = 0\n// 存放各个容器下的updateView方法\nvar updateViews = {}\nvar _updateView = null\n// 拖动的元素，拖动的时候其实它是source创建出来的副本\nvar target = null\n// 选中的拖动元素\nvar source = null\nvar point = {\n  startX: 0,\n  startY: 0,\n  moveX: 0,\n  moveY: 0\n}\n// 监听全局鼠标按下事件\n// 如果该元素包含drag属性，则启用drag方法\non(document, 'mousedown', function (e) {\n  if (e.target.getAttribute('drag') !== null) {\n    point.startX = e.clientX\n    point.startY = e.clientY\n    var dragId = e.target.parentNode.getAttribute('drag-id')\n    if (dragId === undefined) return\n    _updateView = updateViews[dragId]\n    setTimeout(function () {\n      source = e.target\n      target = copyElm(source)\n      addClass(source, 'drag-mask')\n      document.body.appendChild(target)\n    })\n  }\n})\n\non(document, 'mousemove', function (e) {\n  if (target !== null) {\n    point.moveX = e.clientX\n    point.moveY = e.clientY\n    _updateView(target, source, point)\n  }\n})\n\non(document, 'mouseup', function () {\n  if (target) {\n    document.body.removeChild(target)\n    removeClass(source, 'drag-mask')\n    target = null\n  }\n})\n\n// 生成drag-mask样式\nvar style = document.createElement('style')\nstyle.innerHTML = `.drag-mask::after {\n  content: \"\";\n  position: absolute;\n  top:0;\n  left:0;\n  width: 100%;\n  height: 100%;\n  background-color: #c0c6ca;\n  user-select: none;\n  -webkit-user-select:none;\n  -moz-user-select: none;\n  z-index: 9999;\n  border-radius: 4px;\n}\n[drag] {\n  position: relative;\n  cursor: pointer;\n  box-sizing: border-box;\n}`\n\ndocument.getElementsByTagName('head')[0].appendChild(style)\n\nmodule.exports = function (elms) {\n  var index = idx++\n  if (elms.length === undefined) {\n    elms.setAttribute('drag-id', index)\n  } else {\n    for (var i = 0, l = elms.length; i < l; i++) {\n      elms[i].setAttribute('drag-id', index)\n    }\n  }\n  updateViews[index] = applyDrag(elms)\n  return {\n    update: function () {\n      updateViews[index] = applyDrag(elms)\n    }\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/dragable.js\n **/","var trim = function (string) {\n  return (string || '').replace(/^[\\s\\uFEFF]+|[\\s\\uFEFF]+$/g, '')\n}\n\nvar hasClass = function (el, cls) {\n  if (!el || !cls) return false\n  if (cls.indexOf(' ') !== -1) throw new Error('className should not contain space.')\n  if (el.classList) {\n    return el.classList.contains(cls)\n  } else {\n    return (' ' + el.className + ' ').indexOf(' ' + cls + ' ') > -1\n  }\n}\n\nvar addClass = function (el, cls) {\n  if (!el) return\n  var curClass = el.className\n  var classes = (cls || '').split(' ')\n\n  for (var i = 0, j = classes.length; i < j; i++) {\n    var clsName = classes[ i ]\n    if (!clsName) continue\n\n    if (el.classList) {\n      el.classList.add(clsName)\n    } else {\n      if (!hasClass(el, clsName)) {\n        curClass += ' ' + clsName\n      }\n    }\n  }\n  if (!el.classList) {\n    el.className = curClass\n  }\n}\n\nvar removeClass = function (el, cls) {\n  if (!el || !cls) return\n  var classes = cls.split(' ')\n  var curClass = ' ' + el.className + ' '\n\n  for (var i = 0, j = classes.length; i < j; i++) {\n    var clsName = classes[ i ]\n    if (!clsName) continue\n\n    if (el.classList) {\n      el.classList.remove(clsName)\n    } else {\n      if (hasClass(el, clsName)) {\n        curClass = curClass.replace(' ' + clsName + ' ', ' ')\n      }\n    }\n  }\n  if (!el.classList) {\n    el.className = trim(curClass)\n  }\n}\n\nvar addVendor = function (property, value) {\n  return property + ':' + value\n}\n\nvar bindEvent = (function () {\n  if (document.addEventListener) {\n    return function (element, event, handler) {\n      if (element && event && handler) {\n        element.addEventListener(event, handler, false)\n      }\n    }\n  } else {\n    return function (element, event, handler) {\n      if (element && event && handler) {\n        element.attachEvent('on' + event, handler)\n      }\n    }\n  }\n})()\n\nmodule.exports = {\n  hasClass: hasClass,\n  addClass: addClass,\n  removeClass: removeClass,\n  addVendor,\n  on: bindEvent\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/domApi.js\n **/"],"sourceRoot":""}