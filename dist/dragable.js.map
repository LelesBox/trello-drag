{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap eac466a8c30c5bfc18db","webpack:///./src/dragable.js","webpack:///./src/domApi.js"],"names":["copyElm","elm","el","cloneNode","style","position","getBoundingClientRect","margin","top","left","zIndex","width","clientWidth","exchange","arr","idx","idx2","temp","findIndex","target","i","length","getOVerlayElm","source","threshold","p1","p2","overlayWidth","Math","min","bottom","max","overlayHeight","right","overlay","minarea","height","applyDrag","container","containers","elms","undefined","l","children","push","j","jlength","getAttribute","k","klength","clength","sourceElm","point","transform","moveX","startX","moveY","startY","a","b","targetIdx","cot","parentNode","console","log","insertBefore","nextSibling","updateViews","_updateView","document","e","clientX","clientY","dragId","setTimeout","body","appendChild","removeChild","createElement","innerHTML","getElementsByTagName","module","exports","index","setAttribute","update","trim","string","replace","hasClass","cls","indexOf","Error","classList","contains","className","addClass","curClass","classes","split","clsName","add","removeClass","remove","addVendor","property","value","bindEvent","addEventListener","element","event","handler","attachEvent","on"],"mappings":"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","file":"dragable.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"dragable\"] = factory();\n\telse\n\t\troot[\"dragable\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap eac466a8c30c5bfc18db\n **/","import { on, addClass, removeClass } from './domApi'\r\n\r\nfunction copyElm (elm) {\r\n  var el = elm.cloneNode(true)\r\n  el.style.position = 'absolute'\r\n  var position = elm.getBoundingClientRect()\r\n  el.style.margin = '0px'\r\n  el.style.top = position.top + 'px'\r\n  el.style.left = position.left + 'px'\r\n  el.style.zIndex = 9999\r\n  el.style.width = elm.clientWidth + 'px'\r\n  return el\r\n}\r\n\r\nfunction exchange (arr, idx, idx2) {\r\n  var temp = arr[idx]\r\n  arr[idx] = arr[idx2]\r\n  arr[idx2] = temp\r\n}\r\n\r\nfunction findIndex (arr, target) {\r\n  var i = arr.length\r\n  while (i--) {\r\n    if (arr[i] === target) {\r\n      return i\r\n    }\r\n  }\r\n  return -1\r\n}\r\n// 成功则返回target\r\nfunction getOVerlayElm (source, target, threshold) {\r\n  var p1 = source.getBoundingClientRect()\r\n  var p2 = target.getBoundingClientRect()\r\n  var overlayWidth = (Math.min(p1.bottom, p2.bottom) - Math.max(p1.top, p2.top))\r\n  var overlayHeight = (Math.min(p1.right, p2.right) - Math.max(p1.left, p2.left))\r\n  if (overlayWidth > 0 && overlayHeight > 0) {\r\n    var overlay = overlayWidth * overlayHeight\r\n    var minarea = Math.min(p1.width * p1.height, p2.width * p2.height)\r\n    if (overlay / minarea > threshold) {\r\n      // 表示target元素被souce覆盖了！\r\n      return target\r\n    }\r\n  }\r\n  return null\r\n}\r\n\r\n/* **********core*********** */\r\nfunction applyDrag (container) {\r\n  var containers = []\r\n  var elms = []\r\n  if (container.length !== undefined) {\r\n    for (var i = 0, l = container.length; i < l; i++) {\r\n      var children = container[i].children\r\n      containers.push(container[i])\r\n      for (var j = 0, jlength = children.length; j < jlength; j++) {\r\n        if (children[j].getAttribute('drag') !== null) {\r\n          elms.push(children[j])\r\n        }\r\n      }\r\n    }\r\n  } else {\r\n    containers.push(container)\r\n    children = container.children\r\n    for (var k = 0, klength = children.length; k < klength; k++) {\r\n      if (children[k].getAttribute('drag') !== null) {\r\n        elms.push(children[j])\r\n      }\r\n    }\r\n  }\r\n  var length = elms.length\r\n  var clength = containers.length\r\n  return function (elm, sourceElm, point) {\r\n    elm.style.transform = `translate3d(${point.moveX - point.startX}px, ${point.moveY - point.startY}px, 0) rotate(5deg)`\r\n    var a = elm.getBoundingClientRect()\r\n    var el\r\n    var i = length\r\n    var j = clength\r\n    var b\r\n    var targetIdx = findIndex(elms, sourceElm)\r\n    // 便利完同类元素后\r\n    // 还要判断它们的容器，是否与容器重合且容器为空，如果为空则添加到空容器中\r\n    while (j--) {\r\n      var cot = containers[j]\r\n      if (cot === sourceElm.parentNode) continue\r\n      console.log(cot.children.length)\r\n      console.log(getOVerlayElm(elm, cot.parentNode, 0.7))\r\n      if (cot.children.length === 0 && getOVerlayElm(elm, cot.parentNode, 0.7)) {\r\n        console.log(123)\r\n      }\r\n      // if (cot.children.length === 0) {\r\n      //   // console.log('插入空容器')\r\n      //   cot.appendChild(sourceElm)\r\n      //   return\r\n      // }\r\n    }\r\n    while (i--) {\r\n      el = elms[i]\r\n      if (el === sourceElm) {\r\n        continue\r\n      }\r\n        // 覆盖面积达到百分之七十的元素\r\n        // 1.如果该元素于sourceElm属于一个父容器，则\r\n        // 1.1 如果sourceElm粗线在el之前，则 insertBefore(sourceElm, el.nextSibling)\r\n        // 1.2 如果sourceElm粗线在el之后，则 insertBefore(sourceElm, el)\r\n        // 2. 如果el与sourceElm不属于同一个父容器\r\n        // 2.1 如果a.top > b.top 则 insertBefore(sourceElm, el.nextSibling)\r\n        // 2.2 如果 a.bottom < b.bottom 则 insertBefore(sourceElm, el)\r\n      if (el.parentNode === sourceElm.parentNode) {\r\n        if (getOVerlayElm(elm, el, 0.7)) {\r\n          if (targetIdx < i) {\r\n            el.parentNode.insertBefore(sourceElm, el.nextSibling)\r\n            exchange(elms, targetIdx, i)\r\n          } else if (targetIdx > i) {\r\n            el.parentNode.insertBefore(sourceElm, el)\r\n            exchange(elms, targetIdx, i)\r\n          }\r\n          return\r\n        }\r\n      } else if (getOVerlayElm(elm, el, 0.3)) {\r\n        b = el.getBoundingClientRect()\r\n        if (a.top > b.top) {\r\n          el.parentNode.insertBefore(sourceElm, el.nextSibling)\r\n          exchange(elms, targetIdx, i)\r\n        } else if (a.bottom < b.bottom) {\r\n          el.parentNode.insertBefore(sourceElm, el)\r\n          exchange(elms, targetIdx, i)\r\n        }\r\n        return\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n// 给每个容器打标签\r\nvar idx = 0\r\n// 存放各个容器下的updateView方法\r\nvar updateViews = {}\r\nvar _updateView = null\r\n// 拖动的元素，拖动的时候其实它是source创建出来的副本\r\nvar target = null\r\n// 选中的拖动元素\r\nvar source = null\r\nvar point = {\r\n  startX: 0,\r\n  startY: 0,\r\n  moveX: 0,\r\n  moveY: 0\r\n}\r\n// 监听全局鼠标按下事件\r\n// 如果该元素包含drag属性，则启用drag方法\r\non(document, 'mousedown', function (e) {\r\n  if (e.target.getAttribute('drag') !== null) {\r\n    point.startX = e.clientX\r\n    point.startY = e.clientY\r\n    var dragId = e.target.parentNode.getAttribute('drag-id')\r\n    if (dragId === undefined) return\r\n    _updateView = updateViews[dragId]\r\n    setTimeout(function () {\r\n      source = e.target\r\n      target = copyElm(source)\r\n      addClass(source, 'drag-mask')\r\n      document.body.appendChild(target)\r\n    })\r\n  }\r\n})\r\n\r\non(document, 'mousemove', function (e) {\r\n  if (target !== null) {\r\n    point.moveX = e.clientX\r\n    point.moveY = e.clientY\r\n    _updateView(target, source, point)\r\n  }\r\n})\r\n\r\non(document, 'mouseup', function () {\r\n  if (target) {\r\n    document.body.removeChild(target)\r\n    removeClass(source, 'drag-mask')\r\n    target = null\r\n  }\r\n})\r\n\r\n// 生成drag-mask样式\r\nvar style = document.createElement('style')\r\nstyle.innerHTML = `.drag-mask::after {\r\n  content: \"\";\r\n  position: absolute;\r\n  top:0;\r\n  left:0;\r\n  width: 100%;\r\n  height: 100%;\r\n  background-color: #c0c6ca;\r\n  user-select: none;\r\n  -webkit-user-select:none;\r\n  -moz-user-select: none;\r\n  z-index: 9999;\r\n  border-radius: 4px;\r\n}\r\n[drag] {\r\n  position: relative;\r\n  cursor: pointer;\r\n  box-sizing: border-box;\r\n}`\r\n\r\ndocument.getElementsByTagName('head')[0].appendChild(style)\r\n\r\nmodule.exports = function (elms) {\r\n  var index = idx++\r\n  if (elms.length === undefined) {\r\n    elms.setAttribute('drag-id', index)\r\n  } else {\r\n    for (var i = 0, l = elms.length; i < l; i++) {\r\n      elms[i].setAttribute('drag-id', index)\r\n    }\r\n  }\r\n  updateViews[index] = applyDrag(elms)\r\n  return {\r\n    update: function () {\r\n      updateViews[index] = applyDrag(elms)\r\n    }\r\n  }\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/dragable.js\n **/","var trim = function (string) {\r\n  return (string || '').replace(/^[\\s\\uFEFF]+|[\\s\\uFEFF]+$/g, '')\r\n}\r\n\r\nvar hasClass = function (el, cls) {\r\n  if (!el || !cls) return false\r\n  if (cls.indexOf(' ') !== -1) throw new Error('className should not contain space.')\r\n  if (el.classList) {\r\n    return el.classList.contains(cls)\r\n  } else {\r\n    return (' ' + el.className + ' ').indexOf(' ' + cls + ' ') > -1\r\n  }\r\n}\r\n\r\nvar addClass = function (el, cls) {\r\n  if (!el) return\r\n  var curClass = el.className\r\n  var classes = (cls || '').split(' ')\r\n\r\n  for (var i = 0, j = classes.length; i < j; i++) {\r\n    var clsName = classes[ i ]\r\n    if (!clsName) continue\r\n\r\n    if (el.classList) {\r\n      el.classList.add(clsName)\r\n    } else {\r\n      if (!hasClass(el, clsName)) {\r\n        curClass += ' ' + clsName\r\n      }\r\n    }\r\n  }\r\n  if (!el.classList) {\r\n    el.className = curClass\r\n  }\r\n}\r\n\r\nvar removeClass = function (el, cls) {\r\n  if (!el || !cls) return\r\n  var classes = cls.split(' ')\r\n  var curClass = ' ' + el.className + ' '\r\n\r\n  for (var i = 0, j = classes.length; i < j; i++) {\r\n    var clsName = classes[ i ]\r\n    if (!clsName) continue\r\n\r\n    if (el.classList) {\r\n      el.classList.remove(clsName)\r\n    } else {\r\n      if (hasClass(el, clsName)) {\r\n        curClass = curClass.replace(' ' + clsName + ' ', ' ')\r\n      }\r\n    }\r\n  }\r\n  if (!el.classList) {\r\n    el.className = trim(curClass)\r\n  }\r\n}\r\n\r\nvar addVendor = function (property, value) {\r\n  return property + ':' + value\r\n}\r\n\r\nvar bindEvent = (function () {\r\n  if (document.addEventListener) {\r\n    return function (element, event, handler) {\r\n      if (element && event && handler) {\r\n        element.addEventListener(event, handler, false)\r\n      }\r\n    }\r\n  } else {\r\n    return function (element, event, handler) {\r\n      if (element && event && handler) {\r\n        element.attachEvent('on' + event, handler)\r\n      }\r\n    }\r\n  }\r\n})()\r\n\r\nmodule.exports = {\r\n  hasClass: hasClass,\r\n  addClass: addClass,\r\n  removeClass: removeClass,\r\n  addVendor,\r\n  on: bindEvent\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/domApi.js\n **/"],"sourceRoot":""}